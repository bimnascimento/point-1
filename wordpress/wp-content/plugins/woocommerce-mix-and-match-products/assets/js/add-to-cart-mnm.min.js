/*! WooCommerce Mix and Match Products 1.2.0 2017-04-03 14:14 */
var wc_mnm_scripts={};jQuery(document).ready(function(a){function b(a){var b=wc_mnm_params.currency_format_decimal_sep,c=wc_mnm_params.currency_position,d=wc_mnm_params.currency_symbol,e=wc_mnm_params.currency_format_trim_zeros,f=wc_mnm_params.currency_format_num_decimals;if("yes"===e&&f>0){for(var g=0;f>g;g++)b+="0";a=a.replace(b,"")}var h="";return"left"===c?h='<span class="amount">'+d+a+"</span>":"right"===c?h='<span class="amount">'+a+d+"</span>":"left_space"===c?h='<span class="amount">'+d+"&nbsp;"+a+"</span>":"right_space"===c&&(h='<span class="amount">'+a+"&nbsp;"+d+"</span>"),h}function c(a){var b=wc_mnm_params.currency_format_num_decimals,c=wc_mnm_params.currency_format_decimal_sep,d=wc_mnm_params.currency_format_thousand_sep,e=a,f=isNaN(b=Math.abs(b))?2:b,g=void 0==c?",":c,h=void 0==d?".":d,i=0>e?"-":"",j=parseInt(e=Math.abs(+e||0).toFixed(f))+"",k=(k=j.length)>3?k%3:0;return i+(k?j.substr(0,k)+h:"")+j.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(e-j).toFixed(f).slice(2):"")}a.fn.wc_mnm_form=function(){if(!a(this).hasClass("mnm_form"))return!0;var d=a(this),e=d.find(".mnm_cart"),f=e.data("container_id");"undefined"!=typeof wc_mnm_scripts[f]&&d.find("*").off(),wc_mnm_scripts[f]={$mnm_form:d,$mnm_items:d.find(".mnm_item"),$mnm_cart:d.find(".mnm_cart"),$mnm_price:d.find(".mnm_price"),$mnm_button:e.find(".mnm_add_to_cart_button"),$mnm_message:e.find(".mnm_message"),$mnm_message_content:e.find(".mnm_message ul.mnm_message_content"),min_container_size:e.data("min_container_size"),max_container_size:e.data("max_container_size"),validation_messages:[],status_messages:[],init:function(){this.bind_event_handlers();var a=this.$mnm_cart.find("#product-addons-total");this.$mnm_price.after(a),0===this.$mnm_message_content.length&&(this.$mnm_message.length>0&&this.$mnm_message.remove(),this.$mnm_price.after('<div class="mnm_message"><ul class="mnm_message_content woocommerce-info"></ul></div>'),this.$mnm_message=this.$mnm_cart.find(".mnm_message"),this.$mnm_message_content=this.$mnm_message.find(".mnm_message_content")),this.$mnm_form.trigger("wc-mnm-initialized",[this]),this.update()},bind_event_handlers:function(){var a=this;a.$mnm_items.on("change","input.qty",function(b){a.update()})},get_min_container_size:function(){return"undefined"!=typeof this.min_container_size&&""!==this.min_container_size?parseInt(this.min_container_size):!1},get_max_container_size:function(){return"undefined"!=typeof this.max_container_size&&""!==this.max_container_size?parseInt(this.max_container_size):!1},selected_quantity_message:function(a){var b=1==a?wc_mnm_params.i18n_qty_message_single:wc_mnm_params.i18n_qty_message;return b.replace("%s",a)},add_message:function(a,b){"error"===b?this.validation_messages.push(a.toString()):this.status_messages.push(a.toString())},get_messages:function(b){var c=[];return c="all"===b?a.merge(this.status_messages,this.validation_messages):"error"===b?this.validation_messages:this.status_messages},passes_validation:function(){return this.validation_messages.length>0?!1:!0},has_status_messages:function(){return this.status_messages.length>0?!0:!1},reset_messages:function(){this.validation_messages=[],this.status_messages=[]},update:function(){var d=this,e=this.get_min_container_size(),f=this.get_max_container_size(),g=this.$mnm_cart.data("per_product_pricing"),h=0,i=parseFloat(this.$mnm_cart.data("base_price")),j=parseFloat(this.$mnm_cart.data("base_regular_price")),k="",l="";if(this.reset_messages(),this.$mnm_items.each(function(){var b=0;if($input=a(this).find("input.qty"),$input.length>0){var c=parseFloat($input.attr("min")),d=parseFloat($input.attr("max"));f>0&&(d=Math.min(d,parseFloat(f))),c>=0&&parseFloat($input.val())<c&&$input.val(c),d>0&&parseFloat($input.val())>d&&$input.val(d),b=parseInt($input.val()),h+=b,1==g&&(i+=parseFloat(a(this).data("price"))*b,j+=parseFloat(a(this).data("regular_price"))*b)}}),1==g){var m=this.$mnm_form.find(".mnm_cart #product-addons-total");if(m.length>0&&(m.data("price",i),this.$mnm_cart.trigger("woocommerce-product-addons-update")),h>0)if(0==i)k='<p class="price"><span class="total"></span>'+wc_mnm_params.i18n_free+"</p>";else{var n=b(c(i)),o=b(c(j));k=j>i?'<p class="price"><del>'+o+"</del> <ins>"+n+"</ins></p>":'<p class="price">'+n+"</p>"}}if(e===f&&h!==e?(l=1==h?wc_mnm_params.i18n_qty_error_single:wc_mnm_params.i18n_qty_error,l=l.replace("%s",e)):f>0&&e>0&&(e>h||h>f)?l=wc_mnm_params.i18n_min_max_qty_error.replace("%max",f).replace("%min",e):e>0&&e>h?(l=e>1?wc_mnm_params.i18n_min_qty_error:wc_mnm_params.i18n_min_qty_error_singular,l=l.replace("%min",e)):f>0&&h>f&&(l=f>1?wc_mnm_params.i18n_max_qty_error:wc_mnm_params.i18n_max_qty_error_singular,l=l.replace("%max",f)),""!=l){var p=this.selected_quantity_message(h);this.add_message(l.replace("%v",p),"error")}if(this.$mnm_form.trigger("wc-mnm-validation",[d,h]),this.passes_validation()?(f===!1&&this.add_message(this.selected_quantity_message(h)),this.$mnm_button.removeAttr("disabled").removeClass("disabled"),this.$mnm_form.trigger("wc-mnm-display-add-to-cart-button",[d])):(this.$mnm_button.attr("disabled",!0).addClass("disabled"),this.$mnm_form.trigger("wc-mnm-hide-add-to-cart-button",[d])),this.has_status_messages()||!1===this.passes_validation()){var q=a("<ul/>"),r=this.get_messages("all");r.length>0&&a.each(r,function(b,c){q.append(a("<li/>").html(c))}),this.$mnm_message_content.html(q.html()),this.$mnm_message.slideDown(200)}else this.$mnm_message.slideUp(200);""!==k?(this.$mnm_price.html(k),this.$mnm_price.slideDown(200)):this.$mnm_price.slideUp(200),this.$mnm_form.trigger("wc-mnm-price-updated",[d,h,this.$mnm_price])}},wc_mnm_scripts[f].init()},a("body").on("quick-view-displayed",function(){a(".mnm_form").each(function(){a(this).wc_mnm_form()})}),a(".mnm_form").each(function(){a(this).wc_mnm_form()})});